# This file is generated by django-cms ansible installer ({{ template_run_date }})
server {
	listen 80;

	server_name {{ nginx_server_name}};
	access_log /var/log/nginx/{{ semantic_name }}_access.log;
	error_log /var/log/nginx/{{ semantic_name }}_error.log;

	# access_log {{ log_dir }}/nginx_access.log;
	# error_log {{ log_dir }}/nginx_error.log;

	location / {
		uwsgi_pass unix://{{ uwsgi_socket }};
		include uwsgi_params;
		uwsgi_buffers 8 128k;
	}
}

server {
	listen 443;

	server_name {{ nginx_server_name }};
	access_log /var/log/nginx/{{ semantic_name }}_access.log;
	error_log /var/log/nginx/{{ semantic_name }}_error.log;

	ssl on;
	ssl_certificate {{ dist_dir }}{{ site }}/etc/server.crt;
	ssl_certificate_key {{ dist_dir }}{{ site }}/etc/server.key;

	location / {
		uwsgi_pass unix://{{ uwsgi_socket }};
		include uwsgi_params;
		uwsgi_buffers 8 128k;
	}
}
